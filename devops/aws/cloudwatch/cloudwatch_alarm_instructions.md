# –Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ CloudWatch Alarm –¥–ª—è ALB (HTTP 4xx / 5xx)

## ‚úÖ –ó–º—ñ—Å—Ç:
- [1. –ú–µ—Ç–∞ CloudWatch Alarm](#1-–º–µ—Ç–∞-cloudwatch-alarm)
- [2. –Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ Alarm –≤—Ä—É—á–Ω—É](#2-—è–∫-—Å—Ç–≤–æ—Ä–∏—Ç–∏-alarm-–≤—Ä—É—á–Ω—É)
- [3. –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤](#3-–¥–µ—Ç–∞–ª—å–Ω–∏–π-–æ–ø–∏—Å-–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤)
- [4. –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è ALB 4xx/5xx](#4-–ø—Ä–∏–∫–ª–∞–¥-–¥–ª—è-alb-4xx5xx)
- [5. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –ø—Ä–æ–¥](#5-—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ-–∑–Ω–∞—á–µ–Ω–Ω—è-–¥–ª—è-–ø—Ä–æ–¥)

---

## 1. –ú–µ—Ç–∞ CloudWatch Alarm

**CloudWatch Alarm** ‚Äî —Ü–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è, —è–∫–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î, –∫–æ–ª–∏ –∑–∞–¥–∞–Ω–∞ –º–µ—Ç—Ä–∏–∫–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫—ñ–ª—å–∫—ñ—Å—Ç—å HTTP 500 –ø–æ–º–∏–ª–æ–∫) –ø–µ—Ä–µ–≤–∏—â—É—î –≤–∫–∞–∑–∞–Ω–∏–π –ø–æ—Ä—ñ–≥. –¶–µ –¥–æ–∑–≤–æ–ª—è—î:
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω —Å–µ—Ä–≤—ñ—Å—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ø–æ–≤—ñ—â–∞—Ç–∏ DevOps / Support
- –†–µ–∞–≥—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ Lambda, SNS, Auto Scaling —Ç–æ—â–æ

---

## 2. –Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ Alarm –≤—Ä—É—á–Ω—É

### üîß –ö—Ä–æ–∫–∏:
1. –ü–µ—Ä–µ–π–¥–∏ –¥–æ **CloudWatch ‚Üí Alarms ‚Üí Create Alarm**
2. –ù–∞—Ç–∏—Å–Ω–∏ **Select metric**
3. –í–∏–±–µ—Ä–∏:
   - `ApplicationELB`
   - `Per AppELB Metrics`
   - –ó–Ω–∞–π–¥–∏ —Å–≤—ñ–π ALB
   - –û–±–µ—Ä–∏ **HTTPCode_ELB_5XX_Count** –∞–±–æ **HTTPCode_ELB_4XX_Count**
4. –ù–∞—Ç–∏—Å–Ω–∏ **Select metric**
5. –£ —Ä–æ–∑–¥—ñ–ª—ñ **Conditions** –Ω–∞–ª–∞—à—Ç—É–π:
   - `Static` –ø–æ—Ä—ñ–≥
   - `Greater than` –∞–±–æ `Greater or equal`
   - Threshold (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `5`)
   - Evaluation: `1 out of 1` –∞–±–æ —ñ–Ω—à–µ
   - Missing data treatment
6. –ù–∞—Ç–∏—Å–Ω–∏ –¥–∞–ª—ñ –π –æ–±–µ—Ä–∏:
   - SNS Topic (–∞–±–æ —Å—Ç–≤–æ—Ä–∏ –Ω–æ–≤–∏–π)
7. –ù–∞—Ç–∏—Å–Ω–∏ **Create alarm**

---

## 3. –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

### üü¶ `Metric`
–ù–∞–∑–≤–∞ –º–µ—Ç—Ä–∏–∫–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:
- `HTTPCode_ELB_5XX_Count` ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ 5xx –Ω–∞ ALB
- `HTTPCode_ELB_4XX_Count` ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ 4xx

---

### üü¶ `Threshold type`
- `Static`: –ø–æ—Ä—ñ–≥ –∑–∞–¥–∞—î—Ç—å—Å—è —è–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 5)
- `Anomaly detection`: –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π –ø–æ—Ä—ñ–≥, —â–æ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞ —ñ—Å—Ç–æ—Ä—ñ—î—é

---

### üü¶ `Comparison operator`

| –û–ø—Ü—ñ—è               | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                       |
|--------------------|--------------------------------------------------|
| `Greater`          | –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è **–±—ñ–ª—å—à–µ** –∑–∞ –ø–æ—Ä—ñ–≥                |
| `Greater/Equal`    | –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è **–±—ñ–ª—å—à–µ –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é—î** –ø–æ—Ä–æ–≥—É     |
| `Lower`            | –Ø–∫—â–æ **–º–µ–Ω—à–µ** –∑–∞ –ø–æ—Ä—ñ–≥                          |
| `Lower/Equal`      | –Ø–∫—â–æ **–º–µ–Ω—à–µ –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é—î** –ø–æ—Ä–æ–≥—É               |

---

### üü¶ `Threshold value`
–¶–µ —á–∏—Å–ª–æ, —è–∫–µ —î –ø–æ—Ä–æ–≥–æ–º. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:
- `5` –æ–∑–Ω–∞—á–∞—î: —è–∫—â–æ –ø–æ–º–∏–ª–æ–∫ –±—ñ–ª—å—à–µ –Ω—ñ–∂ 5 ‚Äî ALARM

---

### üü¶ `Evaluation period`
–ü–µ—Ä—ñ–æ–¥, –∑–∞ —è–∫–∏–π –∞–≥—Ä–µ–≥—É—é—Ç—å—Å—è –º–µ—Ç—Ä–∏–∫–∏ (—É —Å–µ–∫—É–Ω–¥–∞—Ö):  
- –ù–∞–ø—Ä–∏–∫–ª–∞–¥, 60 = 1 —Ö–≤–∏–ª–∏–Ω–∞

---

### üü¶ `Datapoints to alarm`

| –ó–Ω–∞—á–µ–Ω–Ω—è        | –©–æ –æ–∑–Ω–∞—á–∞—î                                |
|-----------------|--------------------------------------------|
| `1 out of 1`    | 1 –ø–æ—Ä—É—à–µ–Ω–Ω—è –∑–∞ –æ—Å—Ç–∞–Ω–Ω—é 1 —Ö–≤–∏–ª–∏–Ω—É ‚Äî ALARM   |
| `2 out of 3`    | 2 –ø–æ—Ä—É—à–µ–Ω–Ω—è –∑–∞ 3 —Ö–≤–∏–ª–∏–Ω–∏ ‚Äî ALARM           |
| `3 out of 5`    | 3 –∑ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 5 –º–∞—é—Ç—å –±—É—Ç–∏ "–ø–æ–≥–∞–Ω—ñ"         |

---

### üü¶ `Missing data treatment`

| –û–ø—Ü—ñ—è            | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                               |
|------------------|----------------------------------------------------------|
| `missing`        | –Ü–≥–Ω–æ—Ä—É—î –≤—ñ–¥—Å—É—Ç–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏                                 |
| `notBreaching`   | –í–≤–∞–∂–∞—î, —â–æ –≤—Å–µ –¥–æ–±—Ä–µ ‚Üí ALARM **–Ω–µ** —Å–ø—Ä–∞—Ü—é—î              |
| `breaching`      | –í–≤–∞–∂–∞—î, —â–æ —â–æ—Å—å –ø–æ–≥–∞–Ω–æ ‚Üí ALARM **—Å–ø—Ä–∞—Ü—é—î**               |
| `ignore`         | –Ü–≥–Ω–æ—Ä—É—î –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å, –∞–ª–µ **–∑–±–µ—Ä—ñ–≥–∞—î** –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω      |

---

## 4. –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è ALB 5XX

```text
Metric:         HTTPCode_ELB_5XX_Count
Comparison:     Greater
Threshold:      5
Evaluation:     1 minute
Datapoints:     1 out of 1
Missing data:   Treat as bad
```

---

## 5. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è —Å–µ—Ä–µ–¥–æ–≤–∏—â

| –°–µ—Ä–µ–¥–æ–≤–∏—â–µ | –ú–µ—Ç—Ä–∏–∫–∞               | Threshold | –ü–µ—Ä—ñ–æ–¥ | Datapoints | Missing data |
|------------|------------------------|-----------|--------|------------|----------------|
| dev        | 5XX                   | 10        | 60 —Å–µ–∫ | 1/1        | missing        |
| stg        | 5XX                   | 5         | 60 —Å–µ–∫ | 1/1        | missing        |
| prod       | 5XX                   | 1         | 60 —Å–µ–∫ | 1/1        | breaching      |
| prod       | 4XX                   | 10        | 60 —Å–µ–∫ | 2/3        | breaching      |